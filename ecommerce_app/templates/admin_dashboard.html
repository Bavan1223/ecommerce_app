{% extends "base.html" %}

{% block title %}Admin Dashboard{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="section-title" style="margin: 0; border: none;">Manage Products</h2>
        <a href="{{ url_for('admin_add_product') }}" class="btn btn-primary">
            + Add New Product
        </a>
    </div>

    <table class="table table-striped table-hover align-middle">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Image</th>
                <th>Name</th>
                <th>Price</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for product in products %}
            <tr>
                <td>{{ product.id }}</td>
                <td>
                    <img src="{{ url_for('static', filename='images/' + product.image_url) }}" 
                         alt="{{ product.name }}" 
                         width="50" 
                         class="rounded"
                         onerror="this.onerror=null;this.src='{{ url_for('static', filename='images/myphoto.png') }}';">
                </td>
                <td>{{ product.name }}</td>
                <td>${{ "%.2f" | format(product.price) }}</td>
                <td>
                    <a href="{{ url_for('admin_edit_product', product_id=product.id) }}" class="btn btn-sm btn-secondary me-1">
                        Edit
                    </a>
                    <a href="{{ url_for('admin_delete_product', product_id=product.id) }}" 
                       class="btn btn-sm btn-danger"
                       onclick="return confirm('Are you sure you want to delete \'{{ product.name }}\'? This cannot be undone.')">
                        Delete
                    </a>
                </td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" class="text-center">No products found. Add one!</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}